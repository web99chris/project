{"ast":null,"code":"import _extends from \"@babel/runtime-corejs2/helpers/esm/extends\";\nimport _Number$parseInt from \"@babel/runtime-corejs2/core-js/number/parse-int\";\nvar _jsxFileName = \"D:\\\\17\\u5C08\\u6848\\\\\\u5BA2\\u88FD\\u5316ui\\u5C08\\u6848\\\\2011-tw-xmas chris\\\\vmo-frontend-2011-tw-xmas\\\\packages\\\\web\\\\components\\\\leaderboard\\\\LeaderboardItem.tsx\"; // 2008-tw-momo\n\nimport React, { useContext, memo } from 'react';\nimport { LeaderboardItem } from '@vmo/ui';\nimport { conditionMatch } from '@vmo/share/utils';\nimport { useDeepLink } from '@vmo/ui/hooks';\nimport { TranslationContext } from '@vmo/web/context/translationContext';\nimport images from '../../themes/images';\nimport LeaderboardGeneral from './LeaderboardGeneral';\nimport { WrapLeaderboardItem } from './style';\nimport BonusPanel from './BonusPanel';\nimport FrameBorder from '../frameBorder';\nconst RenderLeaderboardItem = memo(({\n  item,\n  condition,\n  showPanel\n}) => {\n  const translation = useContext(TranslationContext);\n  const {\n    handleClickItem\n  } = useDeepLink(item.userID, item.openID, item.roomID);\n  const condIcon = conditionMatch(condition.icons, item);\n  const condBg = conditionMatch(condition.bgs, item);\n  return /*#__PURE__*/React.createElement(WrapLeaderboardItem, {\n    withButton: condition.missions && condition.missions.length > 0,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 32,\n      columnNumber: 5\n    }\n  }, /*#__PURE__*/React.createElement(LeaderboardItem, _extends({\n    handleClickAvatar: handleClickItem,\n    isLive: item.roomID && item.roomID > 0,\n    theme: {\n      colorNickName: '#ffffff',\n      color: '#ce9914',\n      colorRankNumber: '#ffffff',\n      borderBottom: images.borderLine,\n      background: condBg || 'rgba(9, 0, 59, 0.92);'\n    }\n  }, item, {\n    icon: condIcon ? condIcon.icon : '',\n    unit: translation.get('UNIT'),\n    isHighlight: true,\n    withBonus: condition.withBonus,\n    withVote: false,\n    bonus: _Number$parseInt(item.meta.total, 10) || 0,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 35,\n      columnNumber: 7\n    }\n  })), showPanel && /*#__PURE__*/React.createElement(BonusPanel, {\n    meta: item.meta,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 53,\n      columnNumber: 21\n    }\n  }));\n});\n\nconst Leaderboard = ({\n  leaderboardData,\n  condition\n}) => {\n  const panelSize = 120;\n  return /*#__PURE__*/React.createElement(FrameBorder, {\n    title: '',\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 65,\n      columnNumber: 5\n    }\n  }, /*#__PURE__*/React.createElement(LeaderboardGeneral, {\n    itemHeight: 90,\n    panelSize: panelSize,\n    leaderboardData: leaderboardData,\n    withPanel: condition.withBonus,\n    render: (item, showPanel) => {\n      return /*#__PURE__*/React.createElement(RenderLeaderboardItem, {\n        item: item,\n        condition: condition,\n        showPanel: showPanel,\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 73,\n          columnNumber: 13\n        }\n      });\n    },\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 66,\n      columnNumber: 7\n    }\n  }));\n};\n\nexport default memo(Leaderboard); // import React, { useContext, memo } from 'react';\n// import { LeaderboardItem } from '@vmo/ui';\n// import { conditionMatch, numberFormat } from '@vmo/share/utils';\n// import { useDeepLink } from '@vmo/ui/hooks';\n// import { LeaderboardItem as LeaderboardItemInterface } from '@vmo/share/interfaces/LeaderboardItem';\n// import { TranslationContext } from '@vmo/web/context/translationContext';\n// import { ConditionInterface } from '../../constants/conditions';\n// import images from '../../themes/images';\n// import LeaderboardGeneral from './LeaderboardGeneral';\n// import { WrapLeaderboardItem } from './style';\n// import MissionPanel from './MissionPanel';\n// import FrameBorder from '../frameBorder';\n// const getBackgroundColor = (item, condition, condIcon) => {\n//   let backgroundColor = '#070027';\n//   if (condIcon && condIcon.icon) {\n//     backgroundColor =  'rgba(9, 0, 59, 0.92)';\n//   }\n//   if (condition && condition.bgs) {\n//     const condBg = conditionMatch(condition.bgs!, item);\n//     backgroundColor =\n//       condBg && condBg.color\n//         ? condBg.color\n//         :  'rgba(9, 0, 59, 0.92)';\n//   }\n//   return backgroundColor;\n// };\n// const RenderLeaderboardItem: React.FC<{\n//   item: LeaderboardItemInterface;\n//   condition: ConditionInterface;\n//   showPanel: boolean;\n// }> = memo(({ item, condition, showPanel }) => {\n//   const translation = useContext(TranslationContext);\n//   const { handleClickItem } = useDeepLink(\n//     item.userID!,\n//     item.openID!,\n//     item.roomID,\n//   );\n//   const condIcon = conditionMatch(condition.icons!, item);\n//   const backgroundColor = getBackgroundColor(item, condition, condIcon);\n//   const getAdditionalText = () => {\n//     let additionalText = '';\n//     if (condition.withVote) {\n//       additionalText = `${numberFormat(item.score!)} 票 / ${numberFormat(\n//         item.meta.amount!,\n//       )}分`;\n//     }\n//     if (condition.withBonus) {\n//       additionalText = `${numberFormat(item.score!)} 響叮噹 / ${numberFormat(\n//         item.meta.amount!,\n//       )}分`;\n//     }\n//     if (condition.withTotalScore) {\n//       additionalText = `${numberFormat(item.score!)} ( ${numberFormat(\n//         item.meta.vote! || 0,\n//       )} + ${numberFormat(item.meta.gift! || 0)} ) 總積分`;\n//     }\n//     return additionalText;\n//   };\n//   return (\n//     <WrapLeaderboardItem\n//       withButton={condition.missions && condition.missions.length > 0}\n//     >\n//       <LeaderboardItem\n//         handleClickAvatar={handleClickItem}\n//         isLive={item.roomID && item.roomID > 0}\n//         theme={{\n//           colorNickName: '#ffffff',\n//           color: '#ffec17',\n//           colorRankNumber: '#ffec17',\n//           borderBottom: images.borderLine,\n//           background: backgroundColor,\n//         }}\n//         {...item}\n//         icon={condIcon ? condIcon.icon : ''}\n//         unit={translation.get('UNIT')}\n//         additionalText={getAdditionalText()}\n//         isHighlight\n//         withBonus={false}\n//         withVote={false}\n//       />\n//       {showPanel && (\n//         <MissionPanel\n//           condition={condition}\n//           userID={item.userID}\n//           meta={item.meta}\n//         />\n//       )}\n//     </WrapLeaderboardItem>\n//   );\n// });\n// const Leaderboard: React.FC<{\n//   leaderboardData: LeaderboardItemInterface[];\n//   condition: ConditionInterface;\n// }> = ({ leaderboardData, condition }) => {\n//   let panelSize = 84;\n//   if (condition.missions && condition.missions.length > 0) {\n//     panelSize = condition.missions.length * 84 + 20;\n//   }\n//   return (\n//     <FrameBorder title={''}>\n//       <LeaderboardGeneral\n//         itemHeight={78}\n//         panelSize={panelSize}\n//         leaderboardData={leaderboardData}\n//         withMissions={condition.missions && condition.missions.length > 0}\n//         render={(item: LeaderboardItemInterface, showPanel: boolean) => {\n//           return (\n//             <RenderLeaderboardItem\n//               item={item}\n//               condition={condition}\n//               showPanel={showPanel}\n//             />\n//           );\n//         }}\n//       />\n//     </FrameBorder>\n//   );\n// };\n// export default memo(Leaderboard);","map":{"version":3,"sources":["D:/17專案/客製化ui專案/2011-tw-xmas chris/vmo-frontend-2011-tw-xmas/packages/web/components/leaderboard/LeaderboardItem.tsx"],"names":["RenderLeaderboardItem","memo","showPanel","translation","useContext","handleClickItem","useDeepLink","item","condIcon","conditionMatch","condition","condBg","colorNickName","color","colorRankNumber","borderBottom","images","background","Leaderboard","panelSize"],"mappings":";;uLAAA;;AACA,OAAA,KAAA,IAAA,UAAA,EAAA,IAAA,QAAA,OAAA;AAEA,SAAA,eAAA,QAAA,SAAA;AACA,SAAA,cAAA,QAAA,kBAAA;AACA,SAAA,WAAA,QAAA,eAAA;AAEA,SAAA,kBAAA,QAAA,qCAAA;AAGA,OAAA,MAAA,MAAA,qBAAA;AACA,OAAA,kBAAA,MAAA,sBAAA;AACA,SAAA,mBAAA,QAAA,SAAA;AACA,OAAA,UAAA,MAAA,cAAA;AACA,OAAA,WAAA,MAAA,gBAAA;AAEA,MAAMA,qBAIJ,GAAGC,IAAI,CAAC,CAAC;AAAA,EAAA,IAAA;AAAA,EAAA,SAAA;AAAmBC,EAAAA;AAAnB,CAAD,KAAoC;AAC5C,QAAMC,WAAW,GAAGC,UAAU,CAA9B,kBAA8B,CAA9B;AACA,QAAM;AAAEC,IAAAA;AAAF,MAAsBC,WAAW,CACrCC,IAAI,CADiC,MAAA,EAErCA,IAAI,CAFiC,MAAA,EAGrCA,IAAI,CAHN,MAAuC,CAAvC;AAKA,QAAMC,QAAQ,GAAGC,cAAc,CAACC,SAAS,CAAV,KAAA,EAA/B,IAA+B,CAA/B;AACA,QAAMC,MAAM,GAAGF,cAAc,CAACC,SAAS,CAAV,GAAA,EAA7B,IAA6B,CAA7B;AAEA,SAAA,aACE,KAAA,CAAA,aAAA,CAAA,mBAAA,EAAA;AACE,IAAA,UAAU,EAAEA,SAAS,CAATA,QAAAA,IAAsBA,SAAS,CAATA,QAAAA,CAAAA,MAAAA,GADpC,CAAA;AAAA,IAAA,MAAA,EAAA,IAAA;AAAA,IAAA,QAAA,EAAA;AAAA,MAAA,QAAA,EAAA,YAAA;AAAA,MAAA,UAAA,EAAA,EAAA;AAAA,MAAA,YAAA,EAAA;AAAA;AAAA,GAAA,EAAA,aAGE,KAAA,CAAA,aAAA,CAAA,eAAA,EAAA,QAAA,CAAA;AACE,IAAA,iBAAiB,EADnB,eAAA;AAEE,IAAA,MAAM,EAAEH,IAAI,CAAJA,MAAAA,IAAeA,IAAI,CAAJA,MAAAA,GAFzB,CAAA;AAGE,IAAA,KAAK,EAAE;AACLK,MAAAA,aAAa,EADR,SAAA;AAELC,MAAAA,KAAK,EAFA,SAAA;AAGLC,MAAAA,eAAe,EAHV,SAAA;AAILC,MAAAA,YAAY,EAAEC,MAAM,CAJf,UAAA;AAKLC,MAAAA,UAAU,EAAEN,MAAM,IAAI;AALjB;AAHT,GAAA,EAAA,IAAA,EAAA;AAWE,IAAA,IAAI,EAAEH,QAAQ,GAAGA,QAAQ,CAAX,IAAA,GAXhB,EAAA;AAYE,IAAA,IAAI,EAAEL,WAAW,CAAXA,GAAAA,CAZR,MAYQA,CAZR;AAaE,IAAA,WAAW,EAbb,IAAA;AAcE,IAAA,SAAS,EAAEO,SAAS,CAdtB,SAAA;AAeE,IAAA,QAAQ,EAfV,KAAA;AAgBE,IAAA,KAAK,EAAE,gBAAA,CAAgBH,IAAI,CAAJA,IAAAA,CAAhB,KAAA,EAAA,EAAA,CAAA,IAhBT,CAAA;AAAA,IAAA,MAAA,EAAA,IAAA;AAAA,IAAA,QAAA,EAAA;AAAA,MAAA,QAAA,EAAA,YAAA;AAAA,MAAA,UAAA,EAAA,EAAA;AAAA,MAAA,YAAA,EAAA;AAAA;AAAA,GAAA,CAAA,CAHF,EAqBGL,SAAS,IAAA,aAAI,KAAA,CAAA,aAAA,CAAA,UAAA,EAAA;AAAY,IAAA,IAAI,EAAEK,IAAI,CAAtB,IAAA;AAAA,IAAA,MAAA,EAAA,IAAA;AAAA,IAAA,QAAA,EAAA;AAAA,MAAA,QAAA,EAAA,YAAA;AAAA,MAAA,UAAA,EAAA,EAAA;AAAA,MAAA,YAAA,EAAA;AAAA;AAAA,GAAA,CArBhB,CADF;AAdF,CAIS,CAJT;;AAyCA,MAAMW,WAGJ,GAAG,CAAC;AAAA,EAAA,eAAA;AAAmBR,EAAAA;AAAnB,CAAD,KAAoC;AACvC,QAAMS,SAAS,GAAf,GAAA;AAEA,SAAA,aACE,KAAA,CAAA,aAAA,CAAA,WAAA,EAAA;AAAa,IAAA,KAAK,EAAlB,EAAA;AAAA,IAAA,MAAA,EAAA,IAAA;AAAA,IAAA,QAAA,EAAA;AAAA,MAAA,QAAA,EAAA,YAAA;AAAA,MAAA,UAAA,EAAA,EAAA;AAAA,MAAA,YAAA,EAAA;AAAA;AAAA,GAAA,EAAA,aACE,KAAA,CAAA,aAAA,CAAA,kBAAA,EAAA;AACE,IAAA,UAAU,EADZ,EAAA;AAEE,IAAA,SAAS,EAFX,SAAA;AAGE,IAAA,eAAe,EAHjB,eAAA;AAIE,IAAA,SAAS,EAAET,SAAS,CAJtB,SAAA;AAKE,IAAA,MAAM,EAAE,CAAA,IAAA,EAAA,SAAA,KAAwD;AAC9D,aAAA,aACE,KAAA,CAAA,aAAA,CAAA,qBAAA,EAAA;AACE,QAAA,IAAI,EADN,IAAA;AAEE,QAAA,SAAS,EAFX,SAAA;AAGE,QAAA,SAAS,EAHX,SAAA;AAAA,QAAA,MAAA,EAAA,IAAA;AAAA,QAAA,QAAA,EAAA;AAAA,UAAA,QAAA,EAAA,YAAA;AAAA,UAAA,UAAA,EAAA,EAAA;AAAA,UAAA,YAAA,EAAA;AAAA;AAAA,OAAA,CADF;AANJ,KAAA;AAAA,IAAA,MAAA,EAAA,IAAA;AAAA,IAAA,QAAA,EAAA;AAAA,MAAA,QAAA,EAAA,YAAA;AAAA,MAAA,UAAA,EAAA,EAAA;AAAA,MAAA,YAAA,EAAA;AAAA;AAAA,GAAA,CADF,CADF;AANF,CAAA;;AA2BA,eAAeT,IAAI,CAAnB,WAAmB,CAAnB,C,CACA;AAEA;AACA;AACA;AACA;AACA;AAEA;AACA;AACA;AACA;AACA;AACA;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AAEA;AACA;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AAEA;AACA;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AAEA;AACA;AACA;AACA;AACA;AAEA;AACA;AACA;AACA;AACA;AAEA;AACA;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AAEA","sourcesContent":["// 2008-tw-momo\nimport React, { useContext, memo } from 'react';\n\nimport { LeaderboardItem } from '@vmo/ui';\nimport { conditionMatch, numberFormat } from '@vmo/share/utils';\nimport { useDeepLink } from '@vmo/ui/hooks';\nimport { LeaderboardItem as LeaderboardItemInterface } from '@vmo/share/interfaces/LeaderboardItem';\nimport { TranslationContext } from '@vmo/web/context/translationContext';\n\nimport { ConditionInterface } from '../../constants/conditions';\nimport images from '../../themes/images';\nimport LeaderboardGeneral from './LeaderboardGeneral';\nimport { WrapLeaderboardItem } from './style';\nimport BonusPanel from './BonusPanel';\nimport FrameBorder from '../frameBorder';\n\nconst RenderLeaderboardItem: React.FC<{\n  item: LeaderboardItemInterface;\n  condition: ConditionInterface;\n  showPanel: boolean;\n}> = memo(({ item, condition, showPanel }) => {\n  const translation = useContext(TranslationContext);\n  const { handleClickItem } = useDeepLink(\n    item.userID!,\n    item.openID!,\n    item.roomID,\n  );\n  const condIcon = conditionMatch(condition.icons!, item);\n  const condBg = conditionMatch(condition.bgs!, item);\n\n  return (\n    <WrapLeaderboardItem\n      withButton={condition.missions && condition.missions.length > 0}\n    >\n      <LeaderboardItem\n        handleClickAvatar={handleClickItem}\n        isLive={item.roomID && item.roomID > 0}\n        theme={{\n          colorNickName: '#ffffff',\n          color: '#ce9914',\n          colorRankNumber: '#ffffff',\n          borderBottom: images.borderLine,\n          background: condBg || 'rgba(9, 0, 59, 0.92);',\n        }}\n        {...item}\n        icon={condIcon ? condIcon.icon : ''}\n        unit={translation.get('UNIT')}\n        isHighlight\n        withBonus={condition.withBonus}\n        withVote={false}\n        bonus={Number.parseInt(item.meta.total, 10) || 0}\n      />\n      {showPanel && <BonusPanel meta={item.meta} />}\n    </WrapLeaderboardItem>\n  );\n});\n\nconst Leaderboard: React.FC<{\n  leaderboardData: LeaderboardItemInterface[];\n  condition: ConditionInterface;\n}> = ({ leaderboardData, condition }) => {\n  const panelSize = 120;\n\n  return (\n    <FrameBorder title={''}>\n      <LeaderboardGeneral\n        itemHeight={90}\n        panelSize={panelSize}\n        leaderboardData={leaderboardData}\n        withPanel={condition.withBonus}\n        render={(item: LeaderboardItemInterface, showPanel: boolean) => {\n          return (\n            <RenderLeaderboardItem\n              item={item}\n              condition={condition}\n              showPanel={showPanel}\n            />\n          );\n        }}\n      />\n    </FrameBorder>\n  );\n};\n\nexport default memo(Leaderboard);\n// import React, { useContext, memo } from 'react';\n\n// import { LeaderboardItem } from '@vmo/ui';\n// import { conditionMatch, numberFormat } from '@vmo/share/utils';\n// import { useDeepLink } from '@vmo/ui/hooks';\n// import { LeaderboardItem as LeaderboardItemInterface } from '@vmo/share/interfaces/LeaderboardItem';\n// import { TranslationContext } from '@vmo/web/context/translationContext';\n\n// import { ConditionInterface } from '../../constants/conditions';\n// import images from '../../themes/images';\n// import LeaderboardGeneral from './LeaderboardGeneral';\n// import { WrapLeaderboardItem } from './style';\n// import MissionPanel from './MissionPanel';\n// import FrameBorder from '../frameBorder';\n\n// const getBackgroundColor = (item, condition, condIcon) => {\n//   let backgroundColor = '#070027';\n//   if (condIcon && condIcon.icon) {\n//     backgroundColor =  'rgba(9, 0, 59, 0.92)';\n//   }\n//   if (condition && condition.bgs) {\n//     const condBg = conditionMatch(condition.bgs!, item);\n//     backgroundColor =\n//       condBg && condBg.color\n//         ? condBg.color\n//         :  'rgba(9, 0, 59, 0.92)';\n//   }\n\n//   return backgroundColor;\n// };\n\n// const RenderLeaderboardItem: React.FC<{\n//   item: LeaderboardItemInterface;\n//   condition: ConditionInterface;\n//   showPanel: boolean;\n// }> = memo(({ item, condition, showPanel }) => {\n//   const translation = useContext(TranslationContext);\n//   const { handleClickItem } = useDeepLink(\n//     item.userID!,\n//     item.openID!,\n//     item.roomID,\n//   );\n\n//   const condIcon = conditionMatch(condition.icons!, item);\n//   const backgroundColor = getBackgroundColor(item, condition, condIcon);\n\n//   const getAdditionalText = () => {\n//     let additionalText = '';\n//     if (condition.withVote) {\n//       additionalText = `${numberFormat(item.score!)} 票 / ${numberFormat(\n//         item.meta.amount!,\n//       )}分`;\n//     }\n\n//     if (condition.withBonus) {\n//       additionalText = `${numberFormat(item.score!)} 響叮噹 / ${numberFormat(\n//         item.meta.amount!,\n//       )}分`;\n//     }\n\n//     if (condition.withTotalScore) {\n//       additionalText = `${numberFormat(item.score!)} ( ${numberFormat(\n//         item.meta.vote! || 0,\n//       )} + ${numberFormat(item.meta.gift! || 0)} ) 總積分`;\n//     }\n\n//     return additionalText;\n//   };\n\n//   return (\n//     <WrapLeaderboardItem\n//       withButton={condition.missions && condition.missions.length > 0}\n//     >\n//       <LeaderboardItem\n//         handleClickAvatar={handleClickItem}\n//         isLive={item.roomID && item.roomID > 0}\n//         theme={{\n//           colorNickName: '#ffffff',\n//           color: '#ffec17',\n//           colorRankNumber: '#ffec17',\n//           borderBottom: images.borderLine,\n//           background: backgroundColor,\n//         }}\n//         {...item}\n//         icon={condIcon ? condIcon.icon : ''}\n//         unit={translation.get('UNIT')}\n//         additionalText={getAdditionalText()}\n//         isHighlight\n//         withBonus={false}\n//         withVote={false}\n//       />\n//       {showPanel && (\n//         <MissionPanel\n//           condition={condition}\n//           userID={item.userID}\n//           meta={item.meta}\n//         />\n//       )}\n//     </WrapLeaderboardItem>\n//   );\n// });\n\n// const Leaderboard: React.FC<{\n//   leaderboardData: LeaderboardItemInterface[];\n//   condition: ConditionInterface;\n// }> = ({ leaderboardData, condition }) => {\n//   let panelSize = 84;\n//   if (condition.missions && condition.missions.length > 0) {\n//     panelSize = condition.missions.length * 84 + 20;\n//   }\n\n//   return (\n//     <FrameBorder title={''}>\n//       <LeaderboardGeneral\n//         itemHeight={78}\n//         panelSize={panelSize}\n//         leaderboardData={leaderboardData}\n//         withMissions={condition.missions && condition.missions.length > 0}\n//         render={(item: LeaderboardItemInterface, showPanel: boolean) => {\n//           return (\n//             <RenderLeaderboardItem\n//               item={item}\n//               condition={condition}\n//               showPanel={showPanel}\n//             />\n//           );\n//         }}\n//       />\n//     </FrameBorder>\n//   );\n// };\n\n// export default memo(Leaderboard);\n"]},"metadata":{},"sourceType":"module"}