{"ast":null,"code":"import _extends from \"@babel/runtime-corejs2/helpers/esm/extends\";\nvar _jsxFileName = \"D:\\\\17\\u5C08\\u6848\\\\\\u5BA2\\u88FD\\u5316ui\\u5C08\\u6848\\\\vmo-frontend-2011-tw-xmas\\\\packages\\\\web\\\\components\\\\LeaderboardContainer\\\\LeaderboardContainer.tsx\"; // 2002-tw-alliance\n\nimport React, { useState, memo, useEffect, useMemo, useRef, useContext } from 'react';\nimport { createPortal } from 'react-dom';\nimport styled from 'styled-components';\nimport { now } from '@17media/dad';\nimport { TabsRefContext } from '@vmo/ui/hooks/TabsRefContext';\nimport Loading from '@vmo/ui/Loading';\nimport useQueryString from '@vmo/ui/hooks/useQueryString';\nimport useTypeApi from '@vmo/ui/hooks/api/useTypeApi';\nimport { SectionTypes, LocakTotalTime, LocakTotalTime2 } from '@vmo/web/constants/config';\nimport { useMinSectionTracking, createSectionViewAction } from '17media-browser-spy';\nimport { trackingSource } from '@vmo/share/17appTrack';\nimport { Leaderboard } from '../leaderboard';\nimport images from '../../themes/images';\nimport { MissionPanelContext } from '../../context/missionPanelContext';\nexport const LeaderboardContainerWrapper = styled.div.withConfig({\n  displayName: \"LeaderboardContainer__LeaderboardContainerWrapper\",\n  componentId: \"sc-1qmnh3n-0\"\n})([\"margin-top:\", \";@media screen and (min-width:800px){margin-top:\", \";}\"], props => props.styleInfo.marginTop ? `${props.styleInfo.marginTop}vw` : 0, props => props.styleInfo.marginTop ? `calc((800 / 828) * ${props.styleInfo.marginTop * 414 / 100 * 2}px)` : 0);\nconst VideoContainer = styled.div.withConfig({\n  displayName: \"LeaderboardContainer__VideoContainer\",\n  componentId: \"sc-1qmnh3n-1\"\n})([\"position:fixed;width:100%;height:100%;margin:0 auto;font-weight:bold;display:flex;justify-content:center;align-content:center;background:rgba(0,0,0,0.95);top:0;left:0;video{width:100%;height:100%;max-width:800px;min-height:100vh;}img{position:absolute;top:10px;right:10px;width:40px;height:40px;cursor:pointer;border:1px solid #816530;border-radius:50%;}\"]);\n\nconst Iframe = ({\n  src\n}) => {\n  const descriptionRef = useRef(null);\n  useMinSectionTracking(descriptionRef, () => {\n    trackingSource.track(createSectionViewAction(SectionTypes.description));\n  });\n  useEffect(() => {\n    const frame = document.querySelector('#frame');\n    frame.style.overflow = 'hidden';\n    window.addEventListener('message', e => {\n      if (e.data.source && e.data.source.indexOf('main-vision') === -1 && e.data.size) {\n        frame.style.height = `${e.data.size.height}px`;\n      }\n    });\n    return () => window.removeEventListener('message', () => {});\n  }, []);\n  return /*#__PURE__*/React.createElement(\"iframe\", {\n    ref: descriptionRef,\n    id: \"frame\",\n    src: src,\n    frameBorder: \"0\",\n    width: \"100%\",\n    height: \"100%\",\n    scrolling: \"no\",\n    title: \"event description\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 103,\n      columnNumber: 5\n    }\n  });\n};\n\nconst RenderVideo = ({\n  src,\n  poster,\n  setShowVideo\n}) => {\n  const appBody = document.querySelector('body');\n  /* eslint-disable */\n\n  const content = /*#__PURE__*/React.createElement(VideoContainer, {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 120,\n      columnNumber: 5\n    }\n  }, /*#__PURE__*/React.createElement(\"video\", {\n    src: src,\n    controls: true,\n    autoPlay: true,\n    poster: poster,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 121,\n      columnNumber: 7\n    }\n  }), /*#__PURE__*/React.createElement(\"img\", {\n    src: images.closeButton,\n    alt: \"\",\n    onClick: () => setShowVideo({\n      isShow: false,\n      poster: '',\n      video: ''\n    }),\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 122,\n      columnNumber: 7\n    }\n  }));\n  /* eslint-enable */\n\n  useEffect(() => {\n    const body = document.querySelector('body');\n    body.style.overflow = 'hidden';\n    return () => {\n      body.style.overflow = 'auto';\n    };\n  }, []);\n  return createPortal(content, appBody);\n};\n\nconst checkLockTime = () => {\n  const nowTime = now() * 1000;\n  const locakTime = Date.parse(LocakTotalTime);\n\n  if (nowTime >= locakTime) {\n    return true;\n  }\n\n  return false;\n};\n\nconst checkLockTime2 = () => {\n  const nowTime = now() * 1000;\n  const locakTime = Date.parse(LocakTotalTime2);\n\n  if (nowTime >= locakTime) {\n    return true;\n  }\n\n  return false;\n};\n\nconst LeaderboardContainer = ({\n  apis,\n  sortFunc = data => data,\n  realTime = 0,\n  hashCheck = true,\n  iframe,\n  condition,\n  initialData\n}) => {\n  const tabsRef = useContext(TabsRefContext);\n  const [showPanelID, setShowPanelID] = useState('');\n  const [missionDetails, setMissionDetails] = useState([]); // let finalApis = apis;\n  // let finalConditaion = condition;\n  // if (apis && apis[0] && apis[0] === api.total.attend.before) {\n  //   if (checkLockTime2()) {\n  //     finalApis = [api.total.attend.after, api.total.bonus];\n  //     finalConditaion = Conditions.rank512;\n  //   } else if (checkLockTime()) {\n  //     finalApis = [api.total.attend.after, api.total.bonus];\n  //     finalConditaion = Conditions.rank511;\n  //   } else {\n  //     finalApis = [api.total.attend.before, api.total.bonus];\n  //     finalConditaion = Conditions.rank0;\n  //   }\n  // }\n\n  const {\n    loading,\n    leaderboardData\n  } = useTypeApi( // finalApis,\n  apis, 'GET', realTime, hashCheck, initialData);\n  useQueryString(loading);\n  /* eslint-disable */\n\n  const props = useMemo(() => ({\n    leaderboardData: sortFunc(leaderboardData),\n    condition,\n    isLocked: false\n  }), [leaderboardData, condition]);\n  /* eslint-enable */\n\n  if (loading) {\n    return /*#__PURE__*/React.createElement(\"div\", {\n      id: \"loading-container\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 208,\n        columnNumber: 7\n      }\n    }, /*#__PURE__*/React.createElement(Loading, {\n      color: \"#fe41cb\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 209,\n        columnNumber: 9\n      }\n    }));\n  }\n\n  if (iframe) {\n    return /*#__PURE__*/React.createElement(React.Fragment, null, /*#__PURE__*/React.createElement(\"div\", {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 216,\n        columnNumber: 9\n      }\n    }, /*#__PURE__*/React.createElement(Iframe, {\n      src: iframe,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 217,\n        columnNumber: 11\n      }\n    })));\n  }\n\n  return /*#__PURE__*/React.createElement(React.Fragment, null, /*#__PURE__*/React.createElement(MissionPanelContext.Provider, {\n    value: {\n      showPanelID,\n      setShowPanelID,\n      missionDetails,\n      setMissionDetails\n    },\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 226,\n      columnNumber: 5\n    }\n  }, /*#__PURE__*/React.createElement(Leaderboard, _extends({}, props, {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 229,\n      columnNumber: 7\n    }\n  }))));\n};\n\nexport default memo(LeaderboardContainer);","map":{"version":3,"sources":["D:/17專案/客製化ui專案/vmo-frontend-2011-tw-xmas/packages/web/components/LeaderboardContainer/LeaderboardContainer.tsx"],"names":["LeaderboardContainerWrapper","styled","props","marginTop","VideoContainer","Iframe","src","descriptionRef","useRef","useMinSectionTracking","trackingSource","createSectionViewAction","SectionTypes","useEffect","frame","document","window","e","height","RenderVideo","setShowVideo","appBody","content","images","isShow","poster","video","body","createPortal","checkLockTime","nowTime","now","locakTime","Date","checkLockTime2","LeaderboardContainer","sortFunc","data","realTime","hashCheck","initialData","tabsRef","useContext","useState","leaderboardData","useTypeApi","useQueryString","useMemo","isLocked","setMissionDetails","memo"],"mappings":"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","sourcesContent":["// 2002-tw-alliance\nimport React, {\n  useState,\n  memo,\n  useEffect,\n  useMemo,\n  useRef,\n  useCallback,\n  useContext,\n} from 'react';\nimport { createPortal } from 'react-dom';\nimport styled from 'styled-components';\nimport { now } from '@17media/dad';\n\nimport { TabsRefContext } from '@vmo/ui/hooks/TabsRefContext';\nimport Loading from '@vmo/ui/Loading';\nimport useQueryString from '@vmo/ui/hooks/useQueryString';\nimport useTypeApi from '@vmo/ui/hooks/api/useTypeApi';\nimport { WrapperedProps } from '@vmo/ui/hoc/WithLeaderboard/WithLeaderboard';\nimport {\n  SectionTypes,\n  LocakTotalTime,\n  LocakTotalTime2,\n} from '@vmo/web/constants/config';\nimport {\n  useMinSectionTracking,\n  createSectionViewAction,\n} from '17media-browser-spy';\nimport { trackingSource } from '@vmo/share/17appTrack';\nimport { BackToTop } from '@vmo/web/components/Tabs/styled';\nimport { api } from '@vmo/web/constants/api';\nimport * as Conditions from '@vmo/web/constants/conditions';\nimport { Leaderboard } from '../leaderboard';\nimport images from '../../themes/images';\nimport { MissionPanelContext } from '../../context/missionPanelContext';\n\n\nexport const LeaderboardContainerWrapper = styled.div<{\n  styleInfo?: { marginTop?: number };\n}>`\n  margin-top: ${props =>\n    props.styleInfo.marginTop ? `${props.styleInfo.marginTop}vw` : 0};\n  @media screen and (min-width: 800px) {\n    margin-top: ${props =>\n      props.styleInfo.marginTop\n        ? `calc((800 / 828) * ${((props.styleInfo.marginTop * 414) / 100) *\n            2}px)`\n        : 0};\n  }\n`;\n\nconst VideoContainer = styled.div`\n  position: fixed;\n  width: 100%;\n  height: 100%;\n  margin: 0 auto;\n  font-weight: bold;\n  display: flex;\n  justify-content: center;\n  align-content: center;\n  background: rgba(0, 0, 0, 0.95);\n  top: 0;\n  left: 0;\n  video {\n    width: 100%;\n    height: 100%;\n    max-width: 800px;\n    min-height: 100vh;\n  }\n  img {\n    position: absolute;\n    top: 10px;\n    right: 10px;\n    width: 40px;\n    height: 40px;\n    cursor: pointer;\n    border: 1px solid #816530;\n    border-radius: 50%;\n  }\n`;\n\nconst Iframe: React.FC<{ src: string }> = ({ src }) => {\n  const descriptionRef = useRef(null);\n  useMinSectionTracking(descriptionRef, () => {\n    trackingSource.track(createSectionViewAction(SectionTypes.description));\n  });\n  useEffect(() => {\n    const frame = document.querySelector('#frame') as HTMLElement;\n    frame.style.overflow = 'hidden';\n    window.addEventListener('message', e => {\n      if (\n        e.data.source &&\n        e.data.source.indexOf('main-vision') === -1 &&\n        e.data.size\n      ) {\n        frame.style.height = `${e.data.size.height}px`;\n      }\n    });\n    return () => window.removeEventListener('message', () => {});\n  }, []);\n\n  return (\n    <iframe\n      ref={descriptionRef}\n      id=\"frame\"\n      src={src}\n      frameBorder=\"0\"\n      width=\"100%\"\n      height=\"100%\"\n      scrolling=\"no\"\n      title=\"event description\"\n    />\n  );\n};\n\nconst RenderVideo = ({ src, poster, setShowVideo }) => {\n  const appBody = document.querySelector('body');\n  /* eslint-disable */\n  const content = (\n    <VideoContainer>\n      <video src={src} controls autoPlay poster={poster} />\n      <img\n        src={images.closeButton}\n        alt=\"\"\n        onClick={() => setShowVideo({ isShow: false, poster: '', video: '' })}\n      />\n    </VideoContainer>\n  );\n  /* eslint-enable */\n  useEffect(() => {\n    const body = document.querySelector('body');\n    body.style.overflow = 'hidden';\n    return () => {\n      body.style.overflow = 'auto';\n    };\n  }, []);\n  return createPortal(content, appBody);\n};\n\nconst checkLockTime = () => {\n  const nowTime = now() * 1000;\n  const locakTime = Date.parse(LocakTotalTime);\n  if (nowTime >= locakTime) {\n    return true;\n  }\n  return false;\n};\n\nconst checkLockTime2 = () => {\n  const nowTime = now() * 1000;\n  const locakTime = Date.parse(LocakTotalTime2);\n  if (nowTime >= locakTime) {\n    return true;\n  }\n  return false;\n};\n\nconst LeaderboardContainer: React.FC<WrapperedProps> = ({\n  apis,\n  sortFunc = data => data,\n  realTime = 0,\n  hashCheck = true,\n  iframe,\n  condition,\n  initialData,\n}) => {\n  const tabsRef = useContext(TabsRefContext);\n  const [showPanelID, setShowPanelID] = useState<string>('');\n  const [missionDetails, setMissionDetails] = useState([]);\n \n  // let finalApis = apis;\n  // let finalConditaion = condition;\n  // if (apis && apis[0] && apis[0] === api.total.attend.before) {\n  //   if (checkLockTime2()) {\n  //     finalApis = [api.total.attend.after, api.total.bonus];\n  //     finalConditaion = Conditions.rank512;\n  //   } else if (checkLockTime()) {\n  //     finalApis = [api.total.attend.after, api.total.bonus];\n  //     finalConditaion = Conditions.rank511;\n  //   } else {\n  //     finalApis = [api.total.attend.before, api.total.bonus];\n  //     finalConditaion = Conditions.rank0;\n  //   }\n  // }\n  const { loading, leaderboardData } = useTypeApi(\n    // finalApis,\n    apis,\n    'GET',\n    realTime,\n    hashCheck,\n    initialData,\n  );\n  useQueryString(loading);\n  /* eslint-disable */\n  const props = useMemo(\n    () => ({\n      leaderboardData: sortFunc(leaderboardData),\n      condition,\n      isLocked: false,\n    }),\n    [leaderboardData, condition],\n    \n  );\n \n  /* eslint-enable */\n  if (loading) {\n    return (\n      <div id=\"loading-container\">\n        <Loading color=\"#fe41cb\" />\n      </div>\n    );\n  }\n  if (iframe) {\n    return (\n      <>\n        <div>\n          <Iframe src={iframe} />\n        </div>\n      </>\n    );\n  }\n\n  return (\n    <>\n  \n    <MissionPanelContext.Provider\n      value={{ showPanelID, setShowPanelID, missionDetails, setMissionDetails }}\n    >\n      <Leaderboard {...props} />\n\n\n    </MissionPanelContext.Provider>\n\n  </>\n  );\n\n\n};\n\nexport default memo(LeaderboardContainer);\n"]},"metadata":{},"sourceType":"module"}