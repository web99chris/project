{"ast":null,"code":"var _jsxFileName = \"D:\\\\17\\u5C08\\u6848\\\\\\u5BA2\\u88FD\\u5316ui\\u5C08\\u6848\\\\vmo-frontend-2011-tw-xmas\\\\packages\\\\web\\\\components\\\\EventIntro\\\\EventIntro.tsx\"; // 2002-tw-alliance\n\nimport React, { useEffect, useRef } from 'react';\nimport styled from 'styled-components';\nimport { SectionTypes } from '@vmo/web/constants/config';\nimport { useMinSectionTracking, createSectionViewAction } from '17media-browser-spy';\nimport { trackingSource } from '@vmo/share/17appTrack';\nimport { EventIntroHeaderStyled } from '@vmo/web/components/Tabs/styled';\nimport Images from '@vmo/web/themes/images';\nconst EventIntro = styled.div.withConfig({\n  displayName: \"EventIntro\",\n  componentId: \"sc-3v5ht8-0\"\n})([\"position:relative;max-width:800px;display:flex;flex-direction:column;justify-content:center;align-items:center;\"]);\nconst EventIntroTop = styled.div.withConfig({\n  displayName: \"EventIntro__EventIntroTop\",\n  componentId: \"sc-3v5ht8-1\"\n})([\"width:100%;height:24.39vw;background-image:url(\", \"),url(\", \");background-repeat:no-repeat;background-size:100% 102%,95% 102%;background-position:top;@media screen and (min-width:800px){height:calc((800 / 828) * 202px);}\"], Images.yellow1, Images.block1);\nconst EventIntroBottom = styled.div.withConfig({\n  displayName: \"EventIntro__EventIntroBottom\",\n  componentId: \"sc-3v5ht8-2\"\n})([\"position:relative;z-index:0;margin-top:-8px;width:100%;height:31.88vw;background-image:url(\", \"),url(\", \"),url(\", \");background-repeat:no-repeat;background-size:100%,100%,95% 100%;background-position:top;@media screen and (min-width:800px){height:calc((800 / 828) * 264px);}\"], Images.yellow3, Images.cloud, Images.block3);\nconst EventIntroHeader = styled.div.withConfig({\n  displayName: \"EventIntro__EventIntroHeader\",\n  componentId: \"sc-3v5ht8-3\"\n})([\"background-image:url(\", \");background-repeat:no-repeat;background-position:top;background-size:contain;width:100%;height:13.04vw;color:#000000;font-weight:600;text-align:center;@media screen and (min-width:800px){font-size:calc((800 / 828) * 28px);height:calc((800 / 828) * 108px);}\"], Images.eventTitle);\nconst EventIntroContent = styled.div.withConfig({\n  displayName: \"EventIntro__EventIntroContent\",\n  componentId: \"sc-3v5ht8-4\"\n})([\"position:absolute;z-index:1;width:100%;display:flex;flex:0 0 auto;flex-direction:column;justify-content:center;align-content:center;align-self:center;min-height:40.33vw;font-size:3.38vw;font-weight:600;line-height:1.43;color:#fff;background-image:url(\", \"),url(\", \");background-repeat:repeat-y,repeat-y;background-size:100%,95%;background-position:top;@media screen and (min-width:800px){font-size:calc((800 / 828) * 28px);min-height:calc((800 / 828) * 334px);}iframe{margin-top:-12.8vw;@media screen and (min-width:800px){margin-top:calc((800 / 828) * -106px);}}\"], Images.yellow2, Images.block2);\n\nconst Iframe = ({\n  src\n}) => {\n  useEffect(() => {\n    const frame = document.querySelector('#frame');\n    frame.style.overflow = 'hidden';\n    window.addEventListener('message', e => {\n      if (e.data.source && e.data.source.indexOf('main-vision') === -1 && e.data.size) {\n        frame.style.height = `${e.data.size.height}px`;\n      }\n    });\n    return () => window.removeEventListener('message', () => {});\n  }, []);\n  return /*#__PURE__*/React.createElement(\"iframe\", {\n    id: \"frame\",\n    src: src,\n    frameBorder: \"0\",\n    width: \"100%\",\n    scrolling: \"no\",\n    title: \"event description\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 128,\n      columnNumber: 5\n    }\n  });\n};\n\nconst EventIntroComponent = ({\n  title,\n  content,\n  iframe,\n  only\n}) => {\n  const descriptionRef = useRef(null);\n  useMinSectionTracking(descriptionRef, () => {\n    trackingSource.track(createSectionViewAction(SectionTypes.description));\n  });\n\n  if (only) {\n    return /*#__PURE__*/React.createElement(\"div\", {\n      ref: descriptionRef,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 151,\n        columnNumber: 7\n      }\n    }, /*#__PURE__*/React.createElement(Iframe, {\n      src: iframe,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 152,\n        columnNumber: 9\n      }\n    }));\n  }\n\n  if (iframe) {\n    return /*#__PURE__*/React.createElement(EventIntro, {\n      ref: descriptionRef,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 158,\n        columnNumber: 7\n      }\n    }, /*#__PURE__*/React.createElement(EventIntroHeaderStyled, {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 159,\n        columnNumber: 9\n      }\n    }, title), /*#__PURE__*/React.createElement(Iframe, {\n      src: iframe,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 160,\n        columnNumber: 9\n      }\n    }));\n  }\n\n  return /*#__PURE__*/React.createElement(EventIntro, {\n    ref: descriptionRef,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 165,\n      columnNumber: 5\n    }\n  }, content ? /*#__PURE__*/React.createElement(EventIntroContent, {\n    dangerouslySetInnerHTML: {\n      __html: `${content.replace(/\\n/g, '<br/>')}`\n    },\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 168,\n      columnNumber: 9\n    }\n  }) : null);\n};\n\nexport default EventIntroComponent;","map":{"version":3,"sources":["D:/17專案/客製化ui專案/vmo-frontend-2011-tw-xmas/packages/web/components/EventIntro/EventIntro.tsx"],"names":["EventIntro","styled","EventIntroTop","Images","EventIntroBottom","EventIntroHeader","EventIntroContent","Iframe","src","useEffect","frame","document","window","e","height","EventIntroComponent","only","descriptionRef","useRef","useMinSectionTracking","trackingSource","createSectionViewAction","SectionTypes","content","__html"],"mappings":"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","sourcesContent":["// 2002-tw-alliance\nimport React, { useState, useEffect, useCallback, useRef } from 'react';\nimport styled from 'styled-components';\n\nimport { SectionTypes } from '@vmo/web/constants/config';\nimport {\n  useMinSectionTracking,\n  createSectionViewAction,\n} from '17media-browser-spy';\nimport { trackingSource } from '@vmo/share/17appTrack';\nimport { EventIntroHeaderStyled } from '@vmo/web/components/Tabs/styled';\nimport Images from '@vmo/web/themes/images';\n\ninterface EventIntroProps {\n  title?: string;\n  content?: string;\n  iframe?: string;\n  only?: boolean;\n}\n\nconst EventIntro = styled.div`\n  position: relative;\n  max-width: 800px;\n  display: flex;\n  flex-direction: column;\n  justify-content: center;\n  align-items: center;\n`;\n\nconst EventIntroTop = styled.div`\n  width: 100%;\n  height: 24.39vw;\n  background-image: url(${Images.yellow1}), url(${Images.block1});\n  background-repeat: no-repeat;\n  background-size: 100% 102%, 95% 102%;\n  background-position: top;\n  @media screen and (min-width: 800px) {\n    height: calc((800 / 828) * 202px);\n  }\n`;\n\nconst EventIntroBottom = styled.div`\n  position: relative;\n  z-index: 0;\n  margin-top: -8px;\n  width: 100%;\n  height: 31.88vw;\n  background-image: url(${Images.yellow3}), url(${Images.cloud}),\n    url(${Images.block3});\n  background-repeat: no-repeat;\n  background-size: 100%, 100%, 95% 100%;\n  background-position: top;\n  @media screen and (min-width: 800px) {\n    height: calc((800 / 828) * 264px);\n  }\n`;\n\nconst EventIntroHeader = styled.div`\n  background-image: url(${Images.eventTitle});\n  background-repeat: no-repeat;\n  background-position: top;\n  background-size: contain;\n  width: 100%;\n  height: 13.04vw;\n  color: #000000;\n  font-weight: 600;\n  text-align: center;\n  @media screen and (min-width: 800px) {\n    font-size: calc((800 / 828) * 28px);\n    height: calc((800 / 828) * 108px);\n  }\n`;\n\nconst EventIntroContent = styled.div`\n  position: absolute;\n  z-index: 1;\n  width: 100%;\n  display: flex;\n  flex: 0 0 auto;\n  flex-direction: column;\n  justify-content: center;\n  align-content: center;\n  align-self: center;\n  min-height: 40.33vw;\n  font-size: 3.38vw;\n  font-weight: 600;\n  line-height: 1.43;\n  color: #fff;\n  background-image: url(${Images.yellow2}), url(${Images.block2});\n  background-repeat: repeat-y, repeat-y;\n  background-size: 100%, 95%;\n  background-position: top;\n  \n  @media screen and (min-width: 800px) {\n    font-size: calc((800 / 828) * 28px);\n    min-height: calc((800 / 828) * 334px);\n  }\n  iframe {\n     margin-top: -12.8vw;\n    @media screen and (min-width: 800px) {\n      margin-top: calc((800 / 828) * -106px);\n    }\n  }\n`;\n\nconst Iframe: React.FC<{ src: string }> = ({ src }) => {\n\n  \n  useEffect(() => {\n    const frame = document.querySelector('#frame') as HTMLElement;\n    frame.style.overflow = 'hidden';\n    window.addEventListener('message', e => {\n      if (\n        e.data.source &&\n        e.data.source.indexOf('main-vision') === -1 &&\n        e.data.size\n      ) {\n        frame.style.height = `${e.data.size.height}px`;\n      }\n    });\n    return () => window.removeEventListener('message', () => {});\n  }, []);\n\n\n\n\n  return (\n    <iframe\n      id=\"frame\"\n      src={src}\n      frameBorder=\"0\"\n      width=\"100%\"\n      scrolling=\"no\"\n      title=\"event description\"\n    />\n  );\n};\n\nconst EventIntroComponent: React.FC<EventIntroProps> = ({\n  title,\n  content,\n  iframe,\n  only,\n}) => {\n  const descriptionRef = useRef(null);\n  useMinSectionTracking(descriptionRef, () => {\n    trackingSource.track(createSectionViewAction(SectionTypes.description));\n  });\n  if (only) {\n    return (\n      <div ref={descriptionRef}>\n        <Iframe src={iframe} />\n      </div>\n    );\n  }\n  if (iframe) {\n    return (\n      <EventIntro ref={descriptionRef}>\n        <EventIntroHeaderStyled>{title}</EventIntroHeaderStyled>\n        <Iframe src={iframe} />\n      </EventIntro>\n    );\n  }\n  return (\n    <EventIntro ref={descriptionRef}>\n      {/* <EventIntroHeaderStyled>{title}</EventIntroHeaderStyled> */}\n      {content ? (\n        <EventIntroContent\n          dangerouslySetInnerHTML={{\n            __html: `${content.replace(/\\n/g, '<br/>')}`,\n          }}\n        />\n      ) : null}\n    </EventIntro>\n  );\n};\n\nexport default EventIntroComponent;\n"]},"metadata":{},"sourceType":"module"}